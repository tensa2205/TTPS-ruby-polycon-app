<%= render "layouts/navbar.html.erb"%>
<p id="notice"><%= notice %></p>

<h1>Usuarios</h1>
<p> 
  <%= link_to 'Crear usuario', new_user_path, class: "btn btn-primary my-2 margin-button" %>
  <%= link_to 'Volver', root_path,  class: "btn btn-secondary my-2"  %>
</p>
<table class="table">
  <thead class="thead-dark">
    <tr>
      <th scope="col">Nombre</th>
      <th scope="col">Contraseña</th>
      <th scope="col">Rol</th>
      <th scope="col">Acciones</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @users.each do |user| %>
      <tr>
        <td><%= user.name %></td>
        <td><%= user.password %></td>
        <td><%= user.role.name %></td>
        <td>
          <%= link_to 'Detalle', user, class: "btn btn-info btn-sm" %>
          <%= link_to 'Editar', edit_user_path(user), class: "btn btn btn-sm", style: "background-color: #6d04d6; color: white" %>
          <% if current_user != user %>
            <%= link_to 'Borrar', user, method: :delete, data: { confirm: 'Estás seguro de querer eliminar este usuario?' }, class: "btn btn-danger btn-sm"  %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>